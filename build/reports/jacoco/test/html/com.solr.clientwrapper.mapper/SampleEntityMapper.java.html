<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SampleEntityMapper.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">search-as-a-service</a> &gt; <a href="index.source.html" class="el_package">com.solr.clientwrapper.mapper</a> &gt; <span class="el_source">SampleEntityMapper.java</span></div><h1>SampleEntityMapper.java</h1><pre class="source lang-java linenums">package com.solr.clientwrapper.mapper;

import java.util.Collections;
import java.util.HashSet;
import java.util.List;
import java.util.Objects;
import java.util.Set;
import java.util.stream.Collectors;

import com.solr.clientwrapper.domain.dto.SampleEntityDTO;
import org.mapstruct.BeanMapping;
//import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.mapstruct.Named;
import org.modelmapper.ModelMapper;
import org.springframework.stereotype.Component;

import com.solr.clientwrapper.infrastructure.entity.Authority;
import com.solr.clientwrapper.infrastructure.entity.SampleEntity;

/**
 * Mapper for the entity {@link SampleEntity} and its DTO called {@link SampleEntityDTO}.
 *
 *With the hard-coded mappers, it could get very tedious in the future 
 *when we have lots of entities with many fields each
 *
 *So, here we are making use of ModelMapper to generate the DTO mappings automatically
 *
 */

@Component
<span class="fc" id="L32">public class SampleEntityMapper {</span>
	
	// inject ModelMapper
<span class="fc" id="L35">	private ModelMapper modelMapper = new ModelMapper();</span>
	
	////// DTO Mapping strategy //////////

	////////////////////////// 1. Using ModelMapper library /////////////////////
	// Entity to DTO Mapping
	public SampleEntityDTO entityToDto(SampleEntity sampleEntity) {
<span class="nc" id="L42">		return modelMapper.map(sampleEntity, SampleEntityDTO.class);</span>
	}
	
    public List&lt;SampleEntityDTO&gt; entitiesToDTOs(List&lt;SampleEntity&gt; sampleEntities) {
<span class="nc" id="L46">        return sampleEntities.stream().filter(Objects::nonNull).map(this::entityToDto).collect(Collectors.toList());</span>
    }
	
	// DTO to entity Mapping
	public SampleEntity dtoToEntity(SampleEntityDTO sampleEntityDTO) {
<span class="nc" id="L51">		return modelMapper.map(sampleEntityDTO, SampleEntity.class);</span>
	}
	
    public List&lt;SampleEntity&gt; dtosToEntities(List&lt;SampleEntityDTO&gt; sampleEntityDTOs) {
<span class="nc" id="L55">        return sampleEntityDTOs.stream().filter(Objects::nonNull).map(this::dtoToEntity).collect(Collectors.toList());</span>
    }
	
	
	//////////////////////////2. Hard-coded way /////////////////////
    
	/*
	 * public List&lt;SampleEntityDTO&gt;
	 * sampleEntitiesToSampleEntityDTOs(List&lt;SampleEntity&gt; sampleEntities) { return
	 * sampleEntities.stream().filter(Objects::nonNull).map(this::
	 * sampleEntityToSampleEntityDTO).collect(Collectors.toList()); }
	 * 
	 * public SampleEntityDTO sampleEntityToSampleEntityDTO(SampleEntity
	 * sampleEntity) { return new SampleEntityDTO(sampleEntity); }
	 * 
	 * public List&lt;User&gt; sampleEntityDTOsToSampleEntities(List&lt;AdminUserDTO&gt;
	 * userDTOs) { return userDTOs.stream().filter(Objects::nonNull).map(this::
	 * sampleEntityDTOToSampleEntity).collect(Collectors.toList()); }
	 * 
	 * public User sampleEntityDTOToSampleEntity(AdminUserDTO userDTO) { if (userDTO
	 * == null) { return null; } else { User user = new User();
	 * user.setId(userDTO.getId()); user.setLogin(userDTO.getLogin());
	 * user.setFirstName(userDTO.getFirstName());
	 * user.setLastName(userDTO.getLastName()); user.setEmail(userDTO.getEmail());
	 * user.setImageUrl(userDTO.getImageUrl());
	 * user.setActivated(userDTO.isActivated());
	 * user.setLangKey(userDTO.getLangKey()); Set&lt;Authority&gt; authorities =
	 * this.authoritiesFromStrings(userDTO.getAuthorities());
	 * user.setAuthorities(authorities); return user; } }
	 */
    

    private Set&lt;Authority&gt; authoritiesFromStrings(Set&lt;String&gt; authoritiesAsString) {
<span class="nc" id="L88">        Set&lt;Authority&gt; authorities = new HashSet&lt;&gt;();</span>

<span class="nc bnc" id="L90" title="All 2 branches missed.">        if (authoritiesAsString != null) {</span>
<span class="nc" id="L91">            authorities =</span>
                authoritiesAsString
<span class="nc" id="L93">                    .stream()</span>
<span class="nc" id="L94">                    .map(</span>
                        string -&gt; {
<span class="nc" id="L96">                            Authority auth = new Authority();</span>
<span class="nc" id="L97">                            auth.setName(string);</span>
<span class="nc" id="L98">                            return auth;</span>
                        }
                    )
<span class="nc" id="L101">                    .collect(Collectors.toSet());</span>
        }

<span class="nc" id="L104">        return authorities;</span>
    }

    public SampleEntity sampleEntityFromId(Long id) {
<span class="nc bnc" id="L108" title="All 2 branches missed.">        if (id == null) {</span>
<span class="nc" id="L109">            return null;</span>
        }
<span class="nc" id="L111">        SampleEntity sampleEntity = new SampleEntity();</span>
<span class="nc" id="L112">        sampleEntity.setId(id);</span>
<span class="nc" id="L113">        return sampleEntity;</span>
    }

    @Named(&quot;id&quot;)
    @BeanMapping(ignoreByDefault = true)
    @Mapping(target = &quot;id&quot;, source = &quot;id&quot;)
    public SampleEntityDTO toDtoId(SampleEntity user) {
<span class="nc bnc" id="L120" title="All 2 branches missed.">        if (user == null) {</span>
<span class="nc" id="L121">            return null;</span>
        }
<span class="nc" id="L123">        SampleEntityDTO userDto = new SampleEntityDTO();</span>
<span class="nc" id="L124">        userDto.setId(user.getId());</span>
<span class="nc" id="L125">        return userDto;</span>
    }

    @Named(&quot;idSet&quot;)
    @BeanMapping(ignoreByDefault = true)
    @Mapping(target = &quot;id&quot;, source = &quot;id&quot;)
    public Set&lt;SampleEntityDTO&gt; toDtoIdSet(Set&lt;SampleEntity&gt; sampleEntities) {
<span class="nc bnc" id="L132" title="All 2 branches missed.">        if (sampleEntities == null) {</span>
<span class="nc" id="L133">            return Collections.emptySet();</span>
        }

<span class="nc" id="L136">        Set&lt;SampleEntityDTO&gt; sampleEntitySet = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L137" title="All 2 branches missed.">        for (SampleEntity sampleEntityEntity : sampleEntities) {</span>
<span class="nc" id="L138">            sampleEntitySet.add(this.toDtoId(sampleEntityEntity));</span>
<span class="nc" id="L139">        }</span>

<span class="nc" id="L141">        return sampleEntitySet;</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>